<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Examen: Módulo de Maniobras LIS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .lis-header { background-color: #f4f4f4; border-bottom: 1px solid #ddd; }
        .lis-path { background-color: #e9e9e9; font-size: 0.9em; }
        .lis-tab { border-bottom: 2px solid transparent; }
        .lis-tab.active { color: #333; font-weight: 600; border-bottom-color: #333; }
        .lis-button-primary { background-color: #003366; color: white; }
        .lis-button-primary:hover { background-color: #0055A4; }
        .lis-button-secondary { background-color: #e0e0e0; color: #333; }
        .lis-button-secondary:hover { background-color: #d0d0d0; }
        .lis-button-action-green { background-color: #28a745; color: white; }
        .lis-button-action-red { background-color: #dc3545; color: white; }
        .modal-overlay {
            z-index: 50;
            animation: fadeIn 0.3s ease-out;
        }
        #task-card {
            z-index: 60;
            transform: translateX(-50%);
            animation: slideInDown 0.5s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInDown { from { opacity: 0; transform: translateY(-100%) translateX(-50%); } to { opacity: 1; transform: translateY(0) translateX(-50%); } }
    </style>
</head>
<body class="bg-gray-200">

    <div id="role-selection-screen" class="min-h-screen flex items-center justify-center bg-gray-800 text-white p-4">
        <div class="text-center">
            <img src="https://placehold.co/200x60/FFFFFF/003366?text=Lester" alt="Logo de Lester" class="mx-auto mb-8">
            <h1 class="text-4xl font-bold mb-2">Simulador de Examen</h1>
            <p class="text-xl text-gray-300 mb-8">Módulo de Manejo y Control de Maniobras</p>
            <p class="mb-4">Selecciona tu rol para comenzar la evaluación:</p>
            <div class="flex justify-center gap-4">
                <button onclick="startSimulation('Gerente')" class="lis-button-primary text-lg px-8 py-3 rounded-lg">Gerente</button>
                <button onclick="startSimulation('Director')" class="lis-button-primary text-lg px-8 py-3 rounded-lg">Director Comercial</button>
            </div>
        </div>
    </div>

    <div id="simulator-screen" class="hidden">
        <!-- Task Card -->
        <div id="task-card" class="fixed top-4 left-1/2 w-11/12 max-w-4xl bg-white p-4 rounded-lg shadow-2xl flex items-center justify-between gap-4">
            <!-- Left side: Title and Instruction/Feedback -->
            <div class="flex items-center gap-4 flex-grow min-w-0">
                <h3 class="text-md font-bold text-blue-800 flex-shrink-0">Tarea Actual:</h3>
                <div class="flex-grow"> <!-- This div will hold either the instruction or the feedback message -->
                    <p id="task-instruction" class="text-gray-700 text-sm"></p>
                    <div id="feedback-message" class="w-full p-2 rounded-lg text-center font-semibold hidden text-sm"></div>
                </div>
            </div>
            
            <!-- Right side: Buttons -->
            <div class="flex items-center gap-2 flex-shrink-0">
                 <button id="btn-atras" onclick="goBack()" class="lis-button-secondary px-3 py-1 rounded text-xs">Atrás</button>
                 <button id="btn-reiniciar" onclick="restartTest()" class="text-red-600 hover:text-red-800 font-semibold text-xs">Reiniciar</button>
            </div>
        </div>

        <!-- Header LIS -->
        <header class="bg-white shadow-sm">
            <div class="lis-header p-4 flex justify-between items-center">
                <img src="https://placehold.co/150x40/003366/FFFFFF?text=Lester" alt="Logo de Lester" class="h-8">
                <div class="text-right text-sm">
                    <p class="font-semibold" id="userName">Adhal Andrés Cabrera Acosta</p>
                    <p class="text-gray-600" id="userRole">ROL</p>
                </div>
            </div>
            <div class="lis-path text-gray-600 px-4 py-1">
                <p>Lester > Logística > Manejo y Control de Maniobras</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="p-4 md:p-8 pt-24"> <!-- Adjusted padding-top to avoid overlap with task card -->
            <!-- Tabs -->
            <div class="border-b border-gray-300 mb-4">
                <nav class="flex space-x-8">
                    <button class="lis-tab active py-2 px-1">Pendientes</button>
                    <button class="lis-tab py-2 px-1">Autorizadas</button>
                    <button class="lis-tab py-2 px-1">Rechazadas</button>
                </nav>
            </div>

            <!-- Content Area -->
            <div class="bg-white p-4 rounded-b-lg shadow">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-700">MANIOBRAS PENDIENTES</h2>
                    <div class="flex items-center gap-2">
                        <button id="btn-nuevo" onclick="openNewManeuverModal()" class="lis-button-primary px-4 py-2 rounded text-sm font-semibold hidden">NUEVO</button>
                        <input type="text" placeholder="Search..." class="border rounded px-2 py-1 text-sm">
                    </div>
                </div>
                
                <!-- Table -->
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-gray-100 text-gray-600 uppercase">
                            <tr>
                                <th class="p-2">Cliente</th>
                                <th class="p-2">Agente</th>
                                <th class="p-2">Estatus</th>
                                <th class="p-2 text-center">Ver</th>
                            </tr>
                        </thead>
                        <tbody id="maneuvers-table">
                           <!-- Rows will be injected by JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- New Maneuver Modal Step 1 -->
    <div id="new-maneuver-modal-1" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg p-6">
            <h3 class="text-2xl font-bold mb-4">Crear Maniobra</h3>
            <div class="bg-red-100 border-l-4 border-red-500 text-red-800 p-4 rounded mb-4">
                <p><span class="font-bold">Advertencia!</span> El proceso de solicitud debe realizarse al menos con 3 días de anticipación a la carga del pedido.</p>
            </div>
            <label for="cliente-search" class="block font-semibold mb-1">Cliente:</label>
            <input type="text" id="cliente-search" onkeyup="filterClients(this.value)" class="w-full border rounded p-2" placeholder="Buscar por número o nombre...">
            <div id="cliente-list" class="border rounded mt-1 h-32 overflow-y-auto"></div>
            <div class="flex justify-end gap-2 mt-6">
                <button onclick="closeModals()" class="lis-button-secondary px-6 py-2 rounded">Cerrar</button>
                <button onclick="continueToStep2()" class="lis-button-primary px-6 py-2 rounded">Continuar</button>
            </div>
        </div>
    </div>

    <!-- New Maneuver Modal Step 2 -->
    <div id="new-maneuver-modal-2" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl p-6">
            <h3 class="text-2xl font-bold mb-4">Crear Maniobra</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div><label class="block font-semibold">Cliente:</label><input id="form-cliente" type="text" class="w-full bg-gray-100 border rounded p-2" readonly></div>
                <div><label class="block font-semibold">Razón Social:</label><input id="form-razon" type="text" class="w-full bg-gray-100 border rounded p-2" readonly></div>
                <div class="md:col-span-2"><label class="block font-semibold">Consignatario:</label><select id="form-consignatario" class="w-full border rounded p-2"></select></div>
                <div class="md:col-span-2"><label class="block font-semibold">Dirección:</label><textarea id="form-direccion" class="w-full bg-gray-100 border rounded p-2" readonly rows="2"></textarea></div>
                <div><label class="block font-semibold">Costo por Pieza:</label><input id="form-costo-pieza" type="number" class="w-full border rounded p-2"></div>
                <div><label class="block font-semibold">Costo de Camión:</label><input id="form-costo-camion" type="number" class="w-full border rounded p-2"></div>
                <div class="md:col-span-2"><label class="block font-semibold">Comentarios:</label><textarea id="form-comentarios" class="w-full border rounded p-2" rows="2"></textarea></div>
            </div>
            <div class="flex justify-end gap-2 mt-6">
                <button onclick="closeModals()" class="lis-button-secondary px-6 py-2 rounded">Cerrar</button>
                <button onclick="saveManeuver()" class="lis-button-action-green px-6 py-2 rounded">Guardar</button>
            </div>
        </div>
    </div>

    <!-- View/Evaluate Modal -->
    <div id="view-maneuver-modal" class="modal-overlay hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-3xl p-6">
            <h3 class="text-2xl font-bold mb-4">Maniobra</h3>
            <!-- Traffic Light -->
            <div class="mb-4">
                <p class="font-semibold mb-2">Semáforo de Autorizaciones</p>
                <div class="flex items-center gap-4">
                    <div class="bg-gray-800 p-2 rounded-lg inline-flex flex-col gap-2">
                        <div id="light-green" class="w-8 h-8 rounded-full bg-green-500 opacity-30"></div>
                        <div id="light-yellow" class="w-8 h-8 rounded-full bg-yellow-500 opacity-30"></div>
                        <div id="light-red" class="w-8 h-8 rounded-full bg-red-500 opacity-30"></div>
                    </div>
                    <div class="text-sm">
                        <p id="desc-green" class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-green-500"></span> Alta probabilidad - Precio preciso</p>
                        <p id="desc-yellow" class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-yellow-500"></span> Probabilidad 50/50</p>
                        <p id="desc-red" class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-red-500"></span> 80% probabilidad de ser rechazada</p>
                    </div>
                </div>
            </div>
             <!-- Details Table -->
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="p-2 text-left">Consignatario</th>
                            <th class="p-2 text-left">Costo Pieza</th>
                            <th class="p-2 text-left">Costo Camión</th>
                            <th class="p-2 text-left">Comentario</th>
                            <th id="actions-header" class="p-2 text-left">Acción</th>
                        </tr>
                    </thead>
                    <tbody id="view-details-body">
                       <!-- Details injected here -->
                    </tbody>
                </table>
            </div>
            <div class="flex justify-end mt-6">
                <button onclick="closeModals()" class="lis-button-secondary px-6 py-2 rounded">Cerrar</button>
            </div>
        </div>
    </div>


    <script>
        // --- DATABASE ---
        const INITIAL_DB = {
            clients: [
                { id: '002525', name: 'PEDRO SANTIAGO CRUZ', consignatarios: [
                    { id: '000001', address: 'CARR INTERNACIONAL A MEX, Numero Ext: 6, HUAPAJAN DE LEON, OAX' },
                    { id: '000002', address: 'AV. REFORMA 123, CIUDAD DE MEXICO' }
                ]},
                { id: '003155', name: 'ADAN LIMON FAUSTINO', consignatarios: [
                    { id: '000003', address: 'BLVD. HEROES DEL 5 DE MAYO, PUEBLA, PUE' }
                ]}
            ],
            maneuvers: [
                { id: 1, clientId: '002525', agent: '412 - VICTOR CEBALLOS', status: 'Pendiente', consignatarioId: '000001', costPiece: 15, costTruck: 160, comment: 'Maniobra estándar.' },
                { id: 2, clientId: '003155', agent: '410 - CARLOS FERREIRA', status: 'Pendiente', consignatarioId: '000003', costPiece: 30, costTruck: 2500, comment: 'Costo de camión elevado, requiere revisión.' }
            ]
        };
        let DB = JSON.parse(JSON.stringify(INITIAL_DB));


        // --- STATE ---
        let state = {
            role: null,
            currentTask: 0,
            tasks: [],
            selectedClient: null,
            activeManeuverId: null
        };

        const TASKS = {
            Gerente: [
                { instruction: "Tu agente te pide crear una solicitud para el cliente 'PEDRO SANTIAGO CRUZ'. Haz clic en 'NUEVO' para comenzar.", check: (action) => action === 'open_new_modal' },
                { instruction: "Busca y selecciona al cliente '002525 - PEDRO SANTIAGO CRUZ' y haz clic en 'Continuar'.", check: (action, data) => action === 'select_client' && data.clientId === '002525' },
                { instruction: "Ingresa los siguientes datos: Consignatario '000002', Costo por Pieza '20', Costo de Camión '300', y el comentario 'Entrega especial'. Guarda la maniobra.", check: (action, data) => action === 'save_maneuver' && data.consignatarioId === '000002' && data.costPiece == 20 && data.costTruck == 300 },
                { instruction: "¡Excelente! Has creado la solicitud. Ahora, elimina la maniobra original para 'PEDRO SANTIAGO CRUZ' (ID 1) que tenía un costo de camión incorrecto.", check: (action, data) => action === 'delete_maneuver' && data.maneuverId === 1 },
                { instruction: "¡Buen trabajo! Has completado todas las tareas de Gerente.", check: () => false }
            ],
            Director: [
                { instruction: "Revisa la solicitud pendiente para el cliente 'ADAN LIMON FAUSTINO', que reporta un costo de camión elevado.", check: (action, data) => action === 'view_maneuver' && data.maneuverId === 2 },
                { instruction: "El costo del camión ($2500) es excesivo (Semáforo Rojo). Rechaza la solicitud.", check: (action, data) => action === 'reject_maneuver' && data.maneuverId === 2 },
                { instruction: "Ahora, revisa la solicitud para 'PEDRO SANTIAGO CRUZ'.", check: (action, data) => action === 'view_maneuver' && data.maneuverId === 1 },
                { instruction: "El costo es aceptable (Semáforo Verde). Autoriza la solicitud.", check: (action, data) => action === 'authorize_maneuver' && data.maneuverId === 1 },
                { instruction: "¡Excelente! Has evaluado todas las solicitudes pendientes. Has completado el examen.", check: () => false }
            ]
        };

        // --- UI ELEMENTS ---
        const roleSelectionScreen = document.getElementById('role-selection-screen');
        const simulatorScreen = document.getElementById('simulator-screen');
        const taskInstruction = document.getElementById('task-instruction');
        const feedbackMessage = document.getElementById('feedback-message');
        const maneuversTable = document.getElementById('maneuvers-table');
        const modals = document.querySelectorAll('.modal-overlay');
        const backBtn = document.getElementById('btn-atras');

        // --- SIMULATION LOGIC ---
        function startSimulation(role) {
            DB = JSON.parse(JSON.stringify(INITIAL_DB)); // Reset DB
            state.role = role;
            state.tasks = TASKS[role];
            state.currentTask = 0;

            document.getElementById('userRole').textContent = role;
            roleSelectionScreen.classList.add('hidden');
            simulatorScreen.classList.remove('hidden');
            
            document.getElementById('btn-nuevo').classList.add('hidden');
            if (role === 'Gerente') {
                document.getElementById('btn-nuevo').classList.remove('hidden');
            }

            renderManeuvers();
            displayCurrentTask();
        }
        
        function restartTest() {
            roleSelectionScreen.classList.remove('hidden');
            simulatorScreen.classList.add('hidden');
        }

        function goBack() {
            if (state.currentTask > 0) {
                state.currentTask--;
                displayCurrentTask();
            }
        }

        function displayCurrentTask() {
            taskInstruction.textContent = state.tasks[state.currentTask].instruction;
            taskInstruction.classList.remove('hidden');
            feedbackMessage.classList.add('hidden');
            backBtn.disabled = state.currentTask === 0;
        }

        function checkTask(action, data = {}) {
            const currentTask = state.tasks[state.currentTask];
            if (currentTask && currentTask.check(action, data)) {
                showFeedback('¡Correcto!', 'success');
                state.currentTask++;
                setTimeout(() => {
                    displayCurrentTask();
                }, 1500);
                return true;
            } else {
                showFeedback('Acción incorrecta. Inténtalo de nuevo.', 'error');
                return false;
            }
        }

        function showFeedback(message, type) {
            taskInstruction.classList.add('hidden');
            feedbackMessage.textContent = message;
            
            if (type === 'success') {
                feedbackMessage.className = 'w-full p-2 rounded-lg text-center font-semibold bg-green-100 text-green-800 text-sm';
            } else { // error
                feedbackMessage.className = 'w-full p-2 rounded-lg text-center font-semibold bg-red-100 text-red-800 text-sm';
                setTimeout(() => {
                    displayCurrentTask();
                }, 3000);
            }
            feedbackMessage.classList.remove('hidden');
        }

        // --- RENDER FUNCTIONS ---
        function renderManeuvers() {
            maneuversTable.innerHTML = '';
            const pending = DB.maneuvers.filter(m => m.status === 'Pendiente');
            if (pending.length === 0) {
                maneuversTable.innerHTML = '<tr><td colspan="4" class="text-center p-4 text-gray-500">No hay maniobras pendientes.</td></tr>';
                return;
            }
            pending.forEach(m => {
                const client = DB.clients.find(c => c.id === m.clientId);
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-gray-50';
                row.innerHTML = `
                    <td class="p-2">${client.id} - ${client.name}</td>
                    <td class="p-2">${m.agent}</td>
                    <td class="p-2"><span class="bg-yellow-200 text-yellow-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${m.status}</span></td>
                    <td class="p-2 text-center">
                        <button onclick="viewManeuver(${m.id})" class="text-blue-600 hover:text-blue-800">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>
                        </button>
                    </td>
                `;
                maneuversTable.appendChild(row);
            });
        }

        // --- MODAL & ACTION HANDLERS ---
        function openNewManeuverModal() {
            if (checkTask('open_new_modal')) {
                document.getElementById('new-maneuver-modal-1').classList.remove('hidden');
                filterClients('');
            }
        }
        
        function filterClients(query) {
            const list = document.getElementById('cliente-list');
            list.innerHTML = '';
            DB.clients
                .filter(c => c.name.toLowerCase().includes(query.toLowerCase()) || c.id.includes(query))
                .forEach(c => {
                    const item = document.createElement('div');
                    item.className = 'p-2 hover:bg-gray-100 cursor-pointer';
                    item.textContent = `${c.id} - ${c.name}`;
                    item.onclick = () => selectClient(c);
                    list.appendChild(item);
                });
        }

        function selectClient(client) {
            state.selectedClient = client;
            const listItems = document.querySelectorAll('#cliente-list div');
            listItems.forEach(item => item.classList.remove('bg-blue-200'));
            const selectedItem = Array.from(listItems).find(item => item.textContent.startsWith(client.id));
            if (selectedItem) selectedItem.classList.add('bg-blue-200');
            document.getElementById('cliente-search').value = `${client.id} - ${client.name}`;
        }

        function continueToStep2() {
            if (!state.selectedClient) {
                alert('Por favor, selecciona un cliente.');
                return;
            }
            if (checkTask('select_client', { clientId: state.selectedClient.id })) {
                document.getElementById('new-maneuver-modal-1').classList.add('hidden');
                document.getElementById('new-maneuver-modal-2').classList.remove('hidden');
                
                const client = state.selectedClient;
                document.getElementById('form-cliente').value = `${client.id} - ${client.name}`;
                document.getElementById('form-razon').value = client.name;
                
                const consignatarioSelect = document.getElementById('form-consignatario');
                consignatarioSelect.innerHTML = '';
                client.consignatarios.forEach(con => {
                    const option = document.createElement('option');
                    option.value = con.id;
                    option.textContent = `${con.id} - ${con.address}`;
                    consignatarioSelect.appendChild(option);
                });
            }
        }

        function saveManeuver() {
            const data = {
                consignatarioId: document.getElementById('form-consignatario').value,
                costPiece: document.getElementById('form-costo-pieza').value,
                costTruck: document.getElementById('form-costo-camion').value,
                comment: document.getElementById('form-comentarios').value
            };

            if (checkTask('save_maneuver', data)) {
                const newId = Math.max(...DB.maneuvers.map(m => m.id)) + 1;
                DB.maneuvers.push({
                    id: newId,
                    clientId: state.selectedClient.id,
                    agent: '412 - VICTOR CEBALLOS', // Hardcoded for simulation
                    status: 'Pendiente',
                    ...data
                });
                closeModals();
                renderManeuvers();
            }
        }

        function viewManeuver(id) {
            state.activeManeuverId = id;
            if (checkTask('view_maneuver', { maneuverId: id })) {
                const maneuver = DB.maneuvers.find(m => m.id === id);
                const client = DB.clients.find(c => c.id === maneuver.clientId);
                const consignatario = client.consignatarios.find(con => con.id === maneuver.consignatarioId);

                // Setup traffic light
                const lights = ['green', 'yellow', 'red'];
                lights.forEach(l => document.getElementById(`light-${l}`).classList.add('opacity-30'));
                if (maneuver.costTruck < 500) document.getElementById('light-green').classList.remove('opacity-30');
                else if (maneuver.costTruck < 2000) document.getElementById('light-yellow').classList.remove('opacity-30');
                else document.getElementById('light-red').classList.remove('opacity-30');

                // Setup details table
                const detailsBody = document.getElementById('view-details-body');
                let actionsHtml = '';
                if (state.role === 'Gerente') {
                    actionsHtml = `<td><button onclick="deleteManeuver(${id})" class="lis-button-action-red px-3 py-1 rounded text-xs">Eliminar</button></td>`;
                    document.getElementById('actions-header').textContent = 'Acción';
                } else if (state.role === 'Director') {
                    actionsHtml = `<td class="flex gap-2">
                        <button onclick="authorizeManeuver(${id})" class="lis-button-action-green px-3 py-1 rounded text-xs">Autorizar</button>
                        <button onclick="rejectManeuver(${id})" class="lis-button-action-red px-3 py-1 rounded text-xs">Rechazar</button>
                    </td>`;
                    document.getElementById('actions-header').textContent = 'Acciones';
                }

                detailsBody.innerHTML = `
                    <tr class="bg-yellow-100">
                        <td class="p-2">${consignatario.id}</td>
                        <td class="p-2">$${maneuver.costPiece}</td>
                        <td class="p-2">$${maneuver.costTruck}</td>
                        <td class="p-2">${maneuver.comment}</td>
                        ${actionsHtml}
                    </tr>
                `;

                document.getElementById('view-maneuver-modal').classList.remove('hidden');
            }
        }
        
        function deleteManeuver(id) {
            if (checkTask('delete_maneuver', { maneuverId: id })) {
                DB.maneuvers = DB.maneuvers.filter(m => m.id !== id);
                closeModals();
                renderManeuvers();
            }
        }

        function authorizeManeuver(id) {
             if (checkTask('authorize_maneuver', { maneuverId: id })) {
                const maneuver = DB.maneuvers.find(m => m.id === id);
                maneuver.status = 'Autorizada';
                closeModals();
                renderManeuvers();
            }
        }

        function rejectManeuver(id) {
             if (checkTask('reject_maneuver', { maneuverId: id })) {
                const maneuver = DB.maneuvers.find(m => m.id === id);
                maneuver.status = 'Rechazada';
                closeModals();
                renderManeuvers();
            }
        }

        function closeModals() {
            modals.forEach(modal => modal.classList.add('hidden'));
            state.selectedClient = null;
            state.activeManeuverId = null;
        }

    </script>
</body>
</html>
